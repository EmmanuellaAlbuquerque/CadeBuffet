
<h1 class="mt-5">Detalhes do Buffet 
  <strong class="text-purper">
    <%= @buffet.trading_name %>
  </strong>
</h1> 

<div class="container mt-5">
  <%= link_to 'Voltar', root_path, class: "btn btn-outline-highlight align-self-start" %> 
</div>

<div class="container mt-5 mb-5" style="width:60%;">

  <section class="row mb-5" id="info">
    <div class="col me-5">
      <%= image_tag "blue_tint_buffet_template.jpg",
          id: "buffet-image",
          class: "card-img-top rounded",
          style: "width:400px;height:300px;",
          alt: "Imagem do Buffet #{@buffet.trading_name}" 
      %>
    </div>

    <div class="col d-flex flex-column justify-content-center align-items-center">
      <p class="text-description"><%= @buffet.description %></p>
      <p class="align-self-start">
        <strong class="text-darker-gray">cnpj da empresa: </strong>
        <%= @buffet.registration_number %>
      </p>
      <section class="align-self-start mb-5" id="payments">
        <p><strong class="text-darker-gray">Formas de pagamento aceitas</strong></p>
        <% @buffet.payment_methods.each do |method| %>
          <%= method.name %>
        <% end %>
      </section>     
    </div>     
  </section>

  <section class="mb-5" id="contact">
    <h3>Formas de Contato</h3>
    <p>Telefone: <%= @buffet.phone %></p>
    <p>E-mail: <%= @buffet.email %></p>
  </section>  

  <section class="mb-5" id="localization">
    <h3>Localização do Buffet</h3>
    <p><%= @buffet.address %></p>
    <p><%= @buffet.city %> - <%= @buffet.state %></p>
    <p>Bairro: <%= @buffet.neighborhood %></p>
    <p>CEP: <%= @buffet.zipcode %></p>
  </section>

  <section class="mb-5" id="events">
    <h3>Eventos disponíveis no Buffet</h3>

    <div class="container mb-5 mt-5">
      <div class="cards-grid">
        <% @buffet.events.each do |event| %>
          <div class="card mb-3 p-0" style="width: 22rem;height:35rem;">
            <% if event.photos.attached? %>
              <%= image_tag event.photos[0], class: "card-img-top", alt: "Foto do Evento #{event.name}", style:"width:350px;height:230px" %>
            <% else %>
              <%= image_tag "blue_tint_buffet_template.jpg", class: "card-img-top", alt: "Foto do Evento #{event.name}", style:"width:350px;height:230px" %>
            <% end %>
            <div class="card-body mb-3 d-flex flex-column justify-content-between align-items-center position-relative">
              <div class="mb-3 w-100">
                <h5><strong><%= event.name %></strong></h5>
                <hr>
                <p class="card-text"><%= event.description.length > 80 ? "#{event.description.slice(0, 80)}..." : event.description %></p>   
                <hr>
                <p><strong>Quantidade mínima de pessoas:</strong> <%= event.qty_min %></p>
                <p><strong>Quantidade máxima de pessoas:</strong> <%= event.qty_max %></p>
                <p><strong>Duração do Evento:</strong> <%= event.duration %> (min)</p>  
                <%= link_to 'Ver mais Detalhes', event_path(event.id), id: "Detalhes#{event.name.gsub(" ", "")}", class: "position-absolute bottom-0 mb-2 link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover" %>                
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </section>
</div>
